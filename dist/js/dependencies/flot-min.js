/*! Javascript plotting library for jQuery, v. 0.7.
 *
 * Released under the MIT license by IOLA, December 2007.
 *
 */
(function(b){b.color={};b.color.make=function(d,e,g,f){var c={};c.r=d||0;c.g=e||0;c.b=g||0;c.a=f!=null?f:1;c.add=function(h,j){for(var k=0;k<h.length;++k){c[h.charAt(k)]+=j}return c.normalize()};c.scale=function(h,j){for(var k=0;k<h.length;++k){c[h.charAt(k)]*=j}return c.normalize()};c.toString=function(){if(c.a>=1){return"rgb("+[c.r,c.g,c.b].join(",")+")"}else{return"rgba("+[c.r,c.g,c.b,c.a].join(",")+")"}};c.normalize=function(){function h(k,j,l){return j<k?k:(j>l?l:j)}c.r=h(0,parseInt(c.r),255);c.g=h(0,parseInt(c.g),255);c.b=h(0,parseInt(c.b),255);c.a=h(0,c.a,1);return c};c.clone=function(){return b.color.make(c.r,c.b,c.g,c.a)};return c.normalize()};b.color.extract=function(d,e){var c;do{c=d.css(e).toLowerCase();if(c!=""&&c!="transparent"){break}d=d.parent()}while(!b.nodeName(d.get(0),"body"));if(c=="rgba(0, 0, 0, 0)"){c="transparent"}return b.color.parse(c)};b.color.parse=function(c){var d,f=b.color.make;if(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c)){return f(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10))}if(d=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c)){return f(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10),parseFloat(d[4]))}if(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c)){return f(parseFloat(d[1])*2.55,parseFloat(d[2])*2.55,parseFloat(d[3])*2.55)}if(d=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c)){return f(parseFloat(d[1])*2.55,parseFloat(d[2])*2.55,parseFloat(d[3])*2.55,parseFloat(d[4]))}if(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c)){return f(parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16))}if(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c)){return f(parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16))}var e=b.trim(c).toLowerCase();if(e=="transparent"){return f(255,255,255,0)}else{d=a[e]||[0,0,0];return f(d[0],d[1],d[2])}};var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);(function(c){function b(ax,ak,L,ah){var S=[],Q={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:false},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false},shadowSize:3},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},hooks:{}},aB=null,af=null,A=null,J=null,C=null,p=[],ay=[],q={left:0,right:0,top:0,bottom:0},I=0,K=0,h=0,w=0,am={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},at=this;at.setData=al;at.setupGrid=t;at.draw=Y;at.getPlaceholder=function(){return ax};at.getCanvas=function(){return aB};at.getPlotOffset=function(){return q};at.width=function(){return h};at.height=function(){return w};at.offset=function(){var aD=A.offset();aD.left+=q.left;aD.top+=q.top;return aD};at.getData=function(){return S};at.getAxes=function(){var aE={},aD;c.each(p.concat(ay),function(aF,aG){if(aG){aE[aG.direction+(aG.n!=1?aG.n:"")+"axis"]=aG}});return aE};at.getXAxes=function(){return p};at.getYAxes=function(){return ay};at.c2p=E;at.p2c=au;at.getOptions=function(){return Q};at.highlight=z;at.unhighlight=V;at.triggerRedrawOverlay=f;at.pointOffset=function(aD){return{left:parseInt(p[aC(aD,"x")-1].p2c(+aD.x)+q.left),top:parseInt(ay[aC(aD,"y")-1].p2c(+aD.y)+q.top)}};at.shutdown=ai;at.resize=function(){D();g(aB);g(af)};at.hooks=am;H(at);ab(L);Z();al(ak);t();Y();aj();function ap(aF,aD){aD=[at].concat(aD);for(var aE=0;aE<aF.length;++aE){aF[aE].apply(this,aD)}}function H(){for(var aD=0;aD<ah.length;++aD){var aE=ah[aD];aE.init(at);if(aE.options){c.extend(true,Q,aE.options)}}}function ab(aE){var aD;c.extend(true,Q,aE);if(Q.xaxis.color==null){Q.xaxis.color=Q.grid.color}if(Q.yaxis.color==null){Q.yaxis.color=Q.grid.color}if(Q.xaxis.tickColor==null){Q.xaxis.tickColor=Q.grid.tickColor}if(Q.yaxis.tickColor==null){Q.yaxis.tickColor=Q.grid.tickColor}if(Q.grid.borderColor==null){Q.grid.borderColor=Q.grid.color}if(Q.grid.tickColor==null){Q.grid.tickColor=c.color.parse(Q.grid.color).scale("a",0.22).toString()}for(aD=0;aD<Math.max(1,Q.xaxes.length);++aD){Q.xaxes[aD]=c.extend(true,{},Q.xaxis,Q.xaxes[aD])}for(aD=0;aD<Math.max(1,Q.yaxes.length);++aD){Q.yaxes[aD]=c.extend(true,{},Q.yaxis,Q.yaxes[aD])}if(Q.xaxis.noTicks&&Q.xaxis.ticks==null){Q.xaxis.ticks=Q.xaxis.noTicks}if(Q.yaxis.noTicks&&Q.yaxis.ticks==null){Q.yaxis.ticks=Q.yaxis.noTicks}if(Q.x2axis){Q.xaxes[1]=c.extend(true,{},Q.xaxis,Q.x2axis);Q.xaxes[1].position="top"}if(Q.y2axis){Q.yaxes[1]=c.extend(true,{},Q.yaxis,Q.y2axis);Q.yaxes[1].position="right"}if(Q.grid.coloredAreas){Q.grid.markings=Q.grid.coloredAreas}if(Q.grid.coloredAreasColor){Q.grid.markingsColor=Q.grid.coloredAreasColor}if(Q.lines){c.extend(true,Q.series.lines,Q.lines)}if(Q.points){c.extend(true,Q.series.points,Q.points)}if(Q.bars){c.extend(true,Q.series.bars,Q.bars)}if(Q.shadowSize!=null){Q.series.shadowSize=Q.shadowSize}for(aD=0;aD<Q.xaxes.length;++aD){X(p,aD+1).options=Q.xaxes[aD]}for(aD=0;aD<Q.yaxes.length;++aD){X(ay,aD+1).options=Q.yaxes[aD]}for(var aF in am){if(Q.hooks[aF]&&Q.hooks[aF].length){am[aF]=am[aF].concat(Q.hooks[aF])}}ap(am.processOptions,[Q])}function al(aD){S=aa(aD);az();B()}function aa(aG){var aE=[];for(var aD=0;aD<aG.length;++aD){var aF=c.extend(true,{},Q.series);if(aG[aD].data!=null){aF.data=aG[aD].data;delete aG[aD].data;c.extend(true,aF,aG[aD]);aG[aD].data=aF.data}else{aF.data=aG[aD]}aE.push(aF)}return aE}function aC(aE,aF){var aD=aE[aF+"axis"];if(typeof aD=="object"){aD=aD.n}if(typeof aD!="number"){aD=1}return aD}function m(){return c.grep(p.concat(ay),function(aD){return aD})}function E(aG){var aE={},aD,aF;for(aD=0;aD<p.length;++aD){aF=p[aD];if(aF&&aF.used){aE["x"+aF.n]=aF.c2p(aG.left)}}for(aD=0;aD<ay.length;++aD){aF=ay[aD];if(aF&&aF.used){aE["y"+aF.n]=aF.c2p(aG.top)}}if(aE.x1!==undefined){aE.x=aE.x1}if(aE.y1!==undefined){aE.y=aE.y1}return aE}function au(aH){var aF={},aE,aG,aD;for(aE=0;aE<p.length;++aE){aG=p[aE];if(aG&&aG.used){aD="x"+aG.n;if(aH[aD]==null&&aG.n==1){aD="x"}if(aH[aD]!=null){aF.left=aG.p2c(aH[aD]);break}}}for(aE=0;aE<ay.length;++aE){aG=ay[aE];if(aG&&aG.used){aD="y"+aG.n;if(aH[aD]==null&&aG.n==1){aD="y"}if(aH[aD]!=null){aF.top=aG.p2c(aH[aD]);break}}}return aF}function X(aE,aD){if(!aE[aD-1]){aE[aD-1]={n:aD,direction:aE==p?"x":"y",options:c.extend(true,{},aE==p?Q.xaxis:Q.yaxis)}}return aE[aD-1]}function az(){var aI;var aO=S.length,aD=[],aG=[];for(aI=0;aI<S.length;++aI){var aL=S[aI].color;if(aL!=null){--aO;if(typeof aL=="number"){aG.push(aL)}else{aD.push(c.color.parse(S[aI].color))}}}for(aI=0;aI<aG.length;++aI){aO=Math.max(aO,aG[aI]+1)}var aE=[],aH=0;aI=0;while(aE.length<aO){var aK;if(Q.colors.length==aI){aK=c.color.make(100,100,100)}else{aK=c.color.parse(Q.colors[aI])}var aF=aH%2==1?-1:1;aK.scale("rgb",1+aF*Math.ceil(aH/2)*0.2);aE.push(aK);++aI;if(aI>=Q.colors.length){aI=0;++aH}}var aJ=0,aP;for(aI=0;aI<S.length;++aI){aP=S[aI];if(aP.color==null){aP.color=aE[aJ].toString();++aJ}else{if(typeof aP.color=="number"){aP.color=aE[aP.color].toString()}}if(aP.lines.show==null){var aN,aM=true;for(aN in aP){if(aP[aN]&&aP[aN].show){aM=false;break}}if(aM){aP.lines.show=true}}aP.xaxis=X(p,aC(aP,"x"));aP.yaxis=X(ay,aC(aP,"y"))}}function B(){var aQ=Number.POSITIVE_INFINITY,aK=Number.NEGATIVE_INFINITY,aD=Number.MAX_VALUE,aW,aU,aT,aP,aF,aL,aV,aR,aJ,aI,aE,a2,aZ,aN;function aH(a5,a4,a3){if(a4<a5.datamin&&a4!=-aD){a5.datamin=a4}if(a3>a5.datamax&&a3!=aD){a5.datamax=a3}}c.each(m(),function(a3,a4){a4.datamin=aQ;a4.datamax=aK;a4.used=false});for(aW=0;aW<S.length;++aW){aL=S[aW];aL.datapoints={points:[]};ap(am.processRawData,[aL,aL.data,aL.datapoints])}for(aW=0;aW<S.length;++aW){aL=S[aW];var a1=aL.data,aY=aL.datapoints.format;if(!aY){aY=[];aY.push({x:true,number:true,required:true});aY.push({y:true,number:true,required:true});if(aL.bars.show||(aL.lines.show&&aL.lines.fill)){aY.push({y:true,number:true,required:false,defaultValue:0});if(aL.bars.horizontal){delete aY[aY.length-1].y;aY[aY.length-1].x=true}}aL.datapoints.format=aY}if(aL.datapoints.pointsize!=null){continue}aL.datapoints.pointsize=aY.length;aR=aL.datapoints.pointsize;aV=aL.datapoints.points;insertSteps=aL.lines.show&&aL.lines.steps;aL.xaxis.used=aL.yaxis.used=true;for(aU=aT=0;aU<a1.length;++aU,aT+=aR){aN=a1[aU];var aG=aN==null;if(!aG){for(aP=0;aP<aR;++aP){a2=aN[aP];aZ=aY[aP];if(aZ){if(aZ.number&&a2!=null){a2=+a2;if(isNaN(a2)){a2=null}else{if(a2==Infinity){a2=aD}else{if(a2==-Infinity){a2=-aD}}}}if(a2==null){if(aZ.required){aG=true}if(aZ.defaultValue!=null){a2=aZ.defaultValue}}}aV[aT+aP]=a2}}if(aG){for(aP=0;aP<aR;++aP){a2=aV[aT+aP];if(a2!=null){aZ=aY[aP];if(aZ.x){aH(aL.xaxis,a2,a2)}if(aZ.y){aH(aL.yaxis,a2,a2)}}aV[aT+aP]=null}}else{if(insertSteps&&aT>0&&aV[aT-aR]!=null&&aV[aT-aR]!=aV[aT]&&aV[aT-aR+1]!=aV[aT+1]){for(aP=0;aP<aR;++aP){aV[aT+aR+aP]=aV[aT+aP]}aV[aT+1]=aV[aT-aR+1];aT+=aR}}}}for(aW=0;aW<S.length;++aW){aL=S[aW];ap(am.processDatapoints,[aL,aL.datapoints])}for(aW=0;aW<S.length;++aW){aL=S[aW];aV=aL.datapoints.points,aR=aL.datapoints.pointsize;var aM=aQ,aS=aQ,aO=aK,aX=aK;for(aU=0;aU<aV.length;aU+=aR){if(aV[aU]==null){continue}for(aP=0;aP<aR;++aP){a2=aV[aU+aP];aZ=aY[aP];if(!aZ||a2==aD||a2==-aD){continue}if(aZ.x){if(a2<aM){aM=a2}if(a2>aO){aO=a2}}if(aZ.y){if(a2<aS){aS=a2}if(a2>aX){aX=a2}}}}if(aL.bars.show){var a0=aL.bars.align=="left"?0:-aL.bars.barWidth/2;if(aL.bars.horizontal){aS+=a0;aX+=a0+aL.bars.barWidth}else{aM+=a0;aO+=a0+aL.bars.barWidth}}aH(aL.xaxis,aM,aO);aH(aL.yaxis,aS,aX)}c.each(m(),function(a3,a4){if(a4.datamin==aQ){a4.datamin=null}if(a4.datamax==aK){a4.datamax=null}})}function j(aD,aE){var aF=document.createElement("canvas");aF.className=aE;aF.width=I;aF.height=K;if(!aD){c(aF).css({position:"absolute",left:0,top:0})}c(aF).appendTo(ax);if(!aF.getContext){aF=window.G_vmlCanvasManager.initElement(aF)}aF.getContext("2d").save();return aF}function D(){I=ax.width();K=ax.height();if(I<=0||K<=0){throw"Invalid dimensions for plot, width = "+I+", height = "+K}}function g(aE){if(aE.width!=I){aE.width=I}if(aE.height!=K){aE.height=K}var aD=aE.getContext("2d");aD.restore();aD.save()}function Z(){var aE,aD=ax.children("canvas.base"),aF=ax.children("canvas.overlay");if(aD.length==0||aF==0){ax.html("");ax.css({padding:0});if(ax.css("position")=="static"){ax.css("position","relative")}D();aB=j(true,"base");af=j(false,"overlay");aE=false}else{aB=aD.get(0);af=aF.get(0);aE=true}J=aB.getContext("2d");C=af.getContext("2d");A=c([af,aB]);if(aE){ax.data("plot").shutdown();at.resize();C.clearRect(0,0,I,K);A.unbind();ax.children().not([aB,af]).remove()}ax.data("plot",at)}function aj(){if(Q.grid.hoverable){A.mousemove(ac);A.mouseleave(l)}if(Q.grid.clickable){A.click(T)}ap(am.bindEvents,[A])}function ai(){if(O){clearTimeout(O)}A.unbind("mousemove",ac);A.unbind("mouseleave",l);A.unbind("click",T);ap(am.shutdown,[A])}function r(aI){function aE(aJ){return aJ}var aH,aD,aF=aI.options.transform||aE,aG=aI.options.inverseTransform;if(aI.direction=="x"){aH=aI.scale=h/Math.abs(aF(aI.max)-aF(aI.min));aD=Math.min(aF(aI.max),aF(aI.min))}else{aH=aI.scale=w/Math.abs(aF(aI.max)-aF(aI.min));aH=-aH;aD=Math.max(aF(aI.max),aF(aI.min))}if(aF==aE){aI.p2c=function(aJ){return(aJ-aD)*aH}}else{aI.p2c=function(aJ){return(aF(aJ)-aD)*aH}}if(!aG){aI.c2p=function(aJ){return aD+aJ/aH}}else{aI.c2p=function(aJ){return aG(aD+aJ/aH)}}}function N(aF){var aD=aF.options,aH,aL=aF.ticks||[],aK=[],aG,aM=aD.labelWidth,aI=aD.labelHeight,aE;function aJ(aO,aN){return c('<div style="position:absolute;top:-10000px;'+aN+'font-size:smaller"><div class="'+aF.direction+"Axis "+aF.direction+aF.n+'Axis">'+aO.join("")+"</div></div>").appendTo(ax)}if(aF.direction=="x"){if(aM==null){aM=Math.floor(I/(aL.length>0?aL.length:1))}if(aI==null){aK=[];for(aH=0;aH<aL.length;++aH){aG=aL[aH].label;if(aG){aK.push('<div class="tickLabel" style="float:left;width:'+aM+'px">'+aG+"</div>")}}if(aK.length>0){aK.push('<div style="clear:left"></div>');aE=aJ(aK,"width:10000px;");aI=aE.height();aE.remove()}}}else{if(aM==null||aI==null){for(aH=0;aH<aL.length;++aH){aG=aL[aH].label;if(aG){aK.push('<div class="tickLabel">'+aG+"</div>")}}if(aK.length>0){aE=aJ(aK,"");if(aM==null){aM=aE.children().width()}if(aI==null){aI=aE.find("div.tickLabel").height()}aE.remove()}}}if(aM==null){aM=0}if(aI==null){aI=0}aF.labelWidth=aM;aF.labelHeight=aI}function aw(aF){var aE=aF.labelWidth,aN=aF.labelHeight,aJ=aF.options.position,aH=aF.options.tickLength,aI=Q.grid.axisMargin,aL=Q.grid.labelMargin,aM=aF.direction=="x"?p:ay,aG;var aD=c.grep(aM,function(aP){return aP&&aP.options.position==aJ&&aP.reserveSpace});if(c.inArray(aF,aD)==aD.length-1){aI=0}if(aH==null){aH="full"}var aK=c.grep(aM,function(aP){return aP&&aP.reserveSpace});var aO=c.inArray(aF,aK)==0;if(!aO&&aH=="full"){aH=5}if(!isNaN(+aH)){aL+=+aH}if(aF.direction=="x"){aN+=aL;if(aJ=="bottom"){q.bottom+=aN+aI;aF.box={top:K-q.bottom,height:aN}}else{aF.box={top:q.top+aI,height:aN};q.top+=aN+aI}}else{aE+=aL;if(aJ=="left"){aF.box={left:q.left+aI,width:aE};q.left+=aE+aI}else{q.right+=aE+aI;aF.box={left:I-q.right,width:aE}}}aF.position=aJ;aF.tickLength=aH;aF.box.padding=aL;aF.innermost=aO}function W(aD){if(aD.direction=="x"){aD.box.left=q.left;aD.box.width=h}else{aD.box.top=q.top;aD.box.height=w}}function t(){var aE,aG=m();c.each(aG,function(aH,aI){aI.show=aI.options.show;if(aI.show==null){aI.show=aI.used}aI.reserveSpace=aI.show||aI.options.reserveSpace;n(aI)});allocatedAxes=c.grep(aG,function(aH){return aH.reserveSpace});q.left=q.right=q.top=q.bottom=0;if(Q.grid.show){c.each(allocatedAxes,function(aH,aI){U(aI);R(aI);ar(aI,aI.ticks);N(aI)});for(aE=allocatedAxes.length-1;aE>=0;--aE){aw(allocatedAxes[aE])}var aF=Q.grid.minBorderMargin;if(aF==null){aF=0;for(aE=0;aE<S.length;++aE){aF=Math.max(aF,S[aE].points.radius+S[aE].points.lineWidth/2)}}for(var aD in q){q[aD]+=Q.grid.borderWidth;q[aD]=Math.max(aF,q[aD])}}h=I-q.left-q.right;w=K-q.bottom-q.top;c.each(aG,function(aH,aI){r(aI)});if(Q.grid.show){c.each(allocatedAxes,function(aH,aI){W(aI)});k()}o()}function n(aG){var aH=aG.options,aF=+(aH.min!=null?aH.min:aG.datamin),aD=+(aH.max!=null?aH.max:aG.datamax),aJ=aD-aF;if(aJ==0){var aE=aD==0?1:0.01;if(aH.min==null){aF-=aE}if(aH.max==null||aH.min!=null){aD+=aE}}else{var aI=aH.autoscaleMargin;if(aI!=null){if(aH.min==null){aF-=aJ*aI;if(aF<0&&aG.datamin!=null&&aG.datamin>=0){aF=0}}if(aH.max==null){aD+=aJ*aI;if(aD>0&&aG.datamax!=null&&aG.datamax<=0){aD=0}}}}aG.min=aF;aG.max=aD}function U(aI){var aO=aI.options;var aJ;if(typeof aO.ticks=="number"&&aO.ticks>0){aJ=aO.ticks}else{aJ=0.3*Math.sqrt(aI.direction=="x"?I:K)}var aV=(aI.max-aI.min)/aJ,aQ,aD,aP,aT,aU,aS,aK;if(aO.mode=="time"){var aL={second:1000,minute:60*1000,hour:60*60*1000,day:24*60*60*1000,month:30*24*60*60*1000,year:365.2425*24*60*60*1000};var aM=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];var aE=0;if(aO.minTickSize!=null){if(typeof aO.tickSize=="number"){aE=aO.tickSize}else{aE=aO.minTickSize[0]*aL[aO.minTickSize[1]]}}for(var aU=0;aU<aM.length-1;++aU){if(aV<(aM[aU][0]*aL[aM[aU][1]]+aM[aU+1][0]*aL[aM[aU+1][1]])/2&&aM[aU][0]*aL[aM[aU][1]]>=aE){break}}aQ=aM[aU][0];aP=aM[aU][1];if(aP=="year"){aS=Math.pow(10,Math.floor(Math.log(aV/aL.year)/Math.LN10));aK=(aV/aL.year)/aS;if(aK<1.5){aQ=1}else{if(aK<3){aQ=2}else{if(aK<7.5){aQ=5}else{aQ=10}}}aQ*=aS}aI.tickSize=aO.tickSize||[aQ,aP];aD=function(aZ){var a4=[],a2=aZ.tickSize[0],a5=aZ.tickSize[1],a3=new Date(aZ.min);var aY=a2*aL[a5];if(a5=="second"){a3.setUTCSeconds(a(a3.getUTCSeconds(),a2))}if(a5=="minute"){a3.setUTCMinutes(a(a3.getUTCMinutes(),a2))}if(a5=="hour"){a3.setUTCHours(a(a3.getUTCHours(),a2))}if(a5=="month"){a3.setUTCMonth(a(a3.getUTCMonth(),a2))}if(a5=="year"){a3.setUTCFullYear(a(a3.getUTCFullYear(),a2))}a3.setUTCMilliseconds(0);if(aY>=aL.minute){a3.setUTCSeconds(0)}if(aY>=aL.hour){a3.setUTCMinutes(0)}if(aY>=aL.day){a3.setUTCHours(0)}if(aY>=aL.day*4){a3.setUTCDate(1)}if(aY>=aL.year){a3.setUTCMonth(0)}var a7=0,a6=Number.NaN,a0;do{a0=a6;a6=a3.getTime();a4.push(a6);if(a5=="month"){if(a2<1){a3.setUTCDate(1);var aX=a3.getTime();a3.setUTCMonth(a3.getUTCMonth()+1);var a1=a3.getTime();a3.setTime(a6+a7*aL.hour+(a1-aX)*a2);a7=a3.getUTCHours();a3.setUTCHours(0)}else{a3.setUTCMonth(a3.getUTCMonth()+a2)}}else{if(a5=="year"){a3.setUTCFullYear(a3.getUTCFullYear()+a2)}else{a3.setTime(a6+aY)}}}while(a6<aZ.max&&a6!=a0);return a4};aT=function(aX,a0){var a2=new Date(aX);if(aO.timeformat!=null){return c.plot.formatDate(a2,aO.timeformat,aO.monthNames)}var aY=a0.tickSize[0]*aL[a0.tickSize[1]];var aZ=a0.max-a0.min;var a1=(aO.twelveHourClock)?" %p":"";if(aY<aL.minute){fmt="%h:%M:%S"+a1}else{if(aY<aL.day){if(aZ<2*aL.day){fmt="%h:%M"+a1}else{fmt="%b %d %h:%M"+a1}}else{if(aY<aL.month){fmt="%b %d"}else{if(aY<aL.year){if(aZ<aL.year){fmt="%b"}else{fmt="%b %y"}}else{fmt="%y"}}}}return c.plot.formatDate(a2,fmt,aO.monthNames)}}else{var aW=aO.tickDecimals;var aR=-Math.floor(Math.log(aV)/Math.LN10);if(aW!=null&&aR>aW){aR=aW}aS=Math.pow(10,-aR);aK=aV/aS;if(aK<1.5){aQ=1}else{if(aK<3){aQ=2;if(aK>2.25&&(aW==null||aR+1<=aW)){aQ=2.5;++aR}}else{if(aK<7.5){aQ=5}else{aQ=10}}}aQ*=aS;if(aO.minTickSize!=null&&aQ<aO.minTickSize){aQ=aO.minTickSize}aI.tickDecimals=Math.max(0,aW!=null?aW:aR);aI.tickSize=aO.tickSize||aQ;aD=function(aZ){var a1=[];var a2=a(aZ.min,aZ.tickSize),aY=0,aX=Number.NaN,a0;do{a0=aX;aX=a2+aY*aZ.tickSize;a1.push(aX);++aY}while(aX<aZ.max&&aX!=a0);return a1};aT=function(aX,aY){return aX.toFixed(aY.tickDecimals)}}if(aO.alignTicksWithAxis!=null){var aH=(aI.direction=="x"?p:ay)[aO.alignTicksWithAxis-1];if(aH&&aH.used&&aH!=aI){var aN=aD(aI);if(aN.length>0){if(aO.min==null){aI.min=Math.min(aI.min,aN[0])}if(aO.max==null&&aN.length>1){aI.max=Math.max(aI.max,aN[aN.length-1])}}aD=function(aZ){var a0=[],aX,aY;for(aY=0;aY<aH.ticks.length;++aY){aX=(aH.ticks[aY].v-aH.min)/(aH.max-aH.min);aX=aZ.min+aX*(aZ.max-aZ.min);a0.push(aX)}return a0};if(aI.mode!="time"&&aO.tickDecimals==null){var aG=Math.max(0,-Math.floor(Math.log(aV)/Math.LN10)+1),aF=aD(aI);if(!(aF.length>1&&/\..*0$/.test((aF[1]-aF[0]).toFixed(aG)))){aI.tickDecimals=aG}}}}aI.tickGenerator=aD;if(c.isFunction(aO.tickFormatter)){aI.tickFormatter=function(aX,aY){return""+aO.tickFormatter(aX,aY)}}else{aI.tickFormatter=aT}}function R(aH){var aJ=aH.options.ticks,aI=[];if(aJ==null||(typeof aJ=="number"&&aJ>0)){aI=aH.tickGenerator(aH)}else{if(aJ){if(c.isFunction(aJ)){aI=aJ({min:aH.min,max:aH.max})}else{aI=aJ}}}var aG,aD;aH.ticks=[];for(aG=0;aG<aI.length;++aG){var aE=null;var aF=aI[aG];if(typeof aF=="object"){aD=+aF[0];if(aF.length>1){aE=aF[1]}}else{aD=+aF}if(aE==null){aE=aH.tickFormatter(aD,aH)}if(!isNaN(aD)){aH.ticks.push({v:aD,label:aE})}}}function ar(aD,aE){if(aD.options.autoscaleMargin&&aE.length>0){if(aD.options.min==null){aD.min=Math.min(aD.min,aE[0].v)}if(aD.options.max==null&&aE.length>1){aD.max=Math.max(aD.max,aE[aE.length-1].v)}}}function Y(){J.clearRect(0,0,I,K);var aE=Q.grid;if(aE.show&&aE.backgroundColor){P()}if(aE.show&&!aE.aboveData){ae()}for(var aD=0;aD<S.length;++aD){ap(am.drawSeries,[J,S[aD]]);d(S[aD])}ap(am.draw,[J]);if(aE.show&&aE.aboveData){ae()}}function F(aD,aK){var aG,aJ,aI,aF,aH=m();for(i=0;i<aH.length;++i){aG=aH[i];if(aG.direction==aK){aF=aK+aG.n+"axis";if(!aD[aF]&&aG.n==1){aF=aK+"axis"}if(aD[aF]){aJ=aD[aF].from;aI=aD[aF].to;break}}}if(!aD[aF]){aG=aK=="x"?p[0]:ay[0];aJ=aD[aK+"1"];aI=aD[aK+"2"]}if(aJ!=null&&aI!=null&&aJ>aI){var aE=aJ;aJ=aI;aI=aE}return{from:aJ,to:aI,axis:aG}}function P(){J.save();J.translate(q.left,q.top);J.fillStyle=ao(Q.grid.backgroundColor,w,0,"rgba(255, 255, 255, 0)");J.fillRect(0,0,h,w);J.restore()}function ae(){var aH;J.save();J.translate(q.left,q.top);var aJ=Q.grid.markings;if(aJ){if(c.isFunction(aJ)){var aM=at.getAxes();aM.xmin=aM.xaxis.min;aM.xmax=aM.xaxis.max;aM.ymin=aM.yaxis.min;aM.ymax=aM.yaxis.max;aJ=aJ(aM)}for(aH=0;aH<aJ.length;++aH){var aF=aJ[aH],aE=F(aF,"x"),aK=F(aF,"y");if(aE.from==null){aE.from=aE.axis.min}if(aE.to==null){aE.to=aE.axis.max}if(aK.from==null){aK.from=aK.axis.min}if(aK.to==null){aK.to=aK.axis.max}if(aE.to<aE.axis.min||aE.from>aE.axis.max||aK.to<aK.axis.min||aK.from>aK.axis.max){continue}aE.from=Math.max(aE.from,aE.axis.min);aE.to=Math.min(aE.to,aE.axis.max);aK.from=Math.max(aK.from,aK.axis.min);aK.to=Math.min(aK.to,aK.axis.max);if(aE.from==aE.to&&aK.from==aK.to){continue}aE.from=aE.axis.p2c(aE.from);aE.to=aE.axis.p2c(aE.to);aK.from=aK.axis.p2c(aK.from);aK.to=aK.axis.p2c(aK.to);if(aE.from==aE.to||aK.from==aK.to){J.beginPath();J.strokeStyle=aF.color||Q.grid.markingsColor;J.lineWidth=aF.lineWidth||Q.grid.markingsLineWidth;J.moveTo(aE.from,aK.from);J.lineTo(aE.to,aK.to);J.stroke()}else{J.fillStyle=aF.color||Q.grid.markingsColor;J.fillRect(aE.from,aK.to,aE.to-aE.from,aK.from-aK.to)}}}var aM=m(),aO=Q.grid.borderWidth;for(var aG=0;aG<aM.length;++aG){var aD=aM[aG],aI=aD.box,aS=aD.tickLength,aP,aN,aR,aL;if(!aD.show||aD.ticks.length==0){continue}J.strokeStyle=aD.options.tickColor||c.color.parse(aD.options.color).scale("a",0.22).toString();J.lineWidth=1;if(aD.direction=="x"){aP=0;if(aS=="full"){aN=(aD.position=="top"?0:w)}else{aN=aI.top-q.top+(aD.position=="top"?aI.height:0)}}else{aN=0;if(aS=="full"){aP=(aD.position=="left"?0:h)}else{aP=aI.left-q.left+(aD.position=="left"?aI.width:0)}}if(!aD.innermost){J.beginPath();aR=aL=0;if(aD.direction=="x"){aR=h}else{aL=w}if(J.lineWidth==1){aP=Math.floor(aP)+0.5;aN=Math.floor(aN)+0.5}J.moveTo(aP,aN);J.lineTo(aP+aR,aN+aL);J.stroke()}J.beginPath();for(aH=0;aH<aD.ticks.length;++aH){var aQ=aD.ticks[aH].v;aR=aL=0;if(aQ<aD.min||aQ>aD.max||(aS=="full"&&aO>0&&(aQ==aD.min||aQ==aD.max))){continue}if(aD.direction=="x"){aP=aD.p2c(aQ);aL=aS=="full"?-w:aS;if(aD.position=="top"){aL=-aL}}else{aN=aD.p2c(aQ);aR=aS=="full"?-h:aS;if(aD.position=="left"){aR=-aR}}if(J.lineWidth==1){if(aD.direction=="x"){aP=Math.floor(aP)+0.5}else{aN=Math.floor(aN)+0.5}}J.moveTo(aP,aN);J.lineTo(aP+aR,aN+aL)}J.stroke()}if(aO){J.lineWidth=aO;J.strokeStyle=Q.grid.borderColor;J.strokeRect(-aO/2,-aO/2,h+aO,w+aO)}J.restore()}function k(){ax.find(".tickLabels").remove();var aI=['<div class="tickLabels" style="font-size:smaller">'];var aL=m();for(var aF=0;aF<aL.length;++aF){var aE=aL[aF],aH=aE.box;if(!aE.show){continue}aI.push('<div class="'+aE.direction+"Axis "+aE.direction+aE.n+'Axis" style="color:'+aE.options.color+'">');for(var aG=0;aG<aE.ticks.length;++aG){var aJ=aE.ticks[aG];if(!aJ.label||aJ.v<aE.min||aJ.v>aE.max){continue}var aM={},aK;if(aE.direction=="x"){aK="center";aM.left=Math.round(q.left+aE.p2c(aJ.v)-aE.labelWidth/2);if(aE.position=="bottom"){aM.top=aH.top+aH.padding}else{aM.bottom=K-(aH.top+aH.height-aH.padding)}}else{aM.top=Math.round(q.top+aE.p2c(aJ.v)-aE.labelHeight/2);if(aE.position=="left"){aM.right=I-(aH.left+aH.width-aH.padding);aK="right"}else{aM.left=aH.left+aH.padding;aK="left"}}aM.width=aE.labelWidth;var aD=["position:absolute","text-align:"+aK];for(var aN in aM){aD.push(aN+":"+aM[aN]+"px")}aI.push('<div class="tickLabel" style="'+aD.join(";")+'">'+aJ.label+"</div>")}aI.push("</div>")}aI.push("</div>");ax.append(aI.join(""))}function d(aD){if(aD.lines.show){av(aD)}if(aD.bars.show){e(aD)}if(aD.points.show){aq(aD)}}function av(aG){function aF(aR,aS,aK,aW,aV){var aX=aR.points,aL=aR.pointsize,aP=null,aO=null;J.beginPath();for(var aQ=aL;aQ<aX.length;aQ+=aL){var aN=aX[aQ-aL],aU=aX[aQ-aL+1],aM=aX[aQ],aT=aX[aQ+1];if(aN==null||aM==null){continue}if(aU<=aT&&aU<aV.min){if(aT<aV.min){continue}aN=(aV.min-aU)/(aT-aU)*(aM-aN)+aN;aU=aV.min}else{if(aT<=aU&&aT<aV.min){if(aU<aV.min){continue}aM=(aV.min-aU)/(aT-aU)*(aM-aN)+aN;aT=aV.min}}if(aU>=aT&&aU>aV.max){if(aT>aV.max){continue}aN=(aV.max-aU)/(aT-aU)*(aM-aN)+aN;aU=aV.max}else{if(aT>=aU&&aT>aV.max){if(aU>aV.max){continue}aM=(aV.max-aU)/(aT-aU)*(aM-aN)+aN;aT=aV.max}}if(aN<=aM&&aN<aW.min){if(aM<aW.min){continue}aU=(aW.min-aN)/(aM-aN)*(aT-aU)+aU;aN=aW.min}else{if(aM<=aN&&aM<aW.min){if(aN<aW.min){continue}aT=(aW.min-aN)/(aM-aN)*(aT-aU)+aU;aM=aW.min}}if(aN>=aM&&aN>aW.max){if(aM>aW.max){continue}aU=(aW.max-aN)/(aM-aN)*(aT-aU)+aU;aN=aW.max}else{if(aM>=aN&&aM>aW.max){if(aN>aW.max){continue}aT=(aW.max-aN)/(aM-aN)*(aT-aU)+aU;aM=aW.max}}if(aN!=aP||aU!=aO){J.moveTo(aW.p2c(aN)+aS,aV.p2c(aU)+aK)}aP=aM;aO=aT;J.lineTo(aW.p2c(aM)+aS,aV.p2c(aT)+aK)}J.stroke()}function aH(aK,aS,aR){var aY=aK.points,aX=aK.pointsize,aP=Math.min(Math.max(0,aR.min),aR.max),aZ=0,aW,aV=false,aO=1,aN=0,aT=0;while(true){if(aX>0&&aZ>aY.length+aX){break}aZ+=aX;var a1=aY[aZ-aX],aM=aY[aZ-aX+aO],a0=aY[aZ],aL=aY[aZ+aO];if(aV){if(aX>0&&a1!=null&&a0==null){aT=aZ;aX=-aX;aO=2;continue}if(aX<0&&aZ==aN+aX){J.fill();aV=false;aX=-aX;aO=1;aZ=aN=aT+aX;continue}}if(a1==null||a0==null){continue}if(a1<=a0&&a1<aS.min){if(a0<aS.min){continue}aM=(aS.min-a1)/(a0-a1)*(aL-aM)+aM;a1=aS.min}else{if(a0<=a1&&a0<aS.min){if(a1<aS.min){continue}aL=(aS.min-a1)/(a0-a1)*(aL-aM)+aM;a0=aS.min}}if(a1>=a0&&a1>aS.max){if(a0>aS.max){continue}aM=(aS.max-a1)/(a0-a1)*(aL-aM)+aM;a1=aS.max}else{if(a0>=a1&&a0>aS.max){if(a1>aS.max){continue}aL=(aS.max-a1)/(a0-a1)*(aL-aM)+aM;a0=aS.max}}if(!aV){J.beginPath();J.moveTo(aS.p2c(a1),aR.p2c(aP));aV=true}if(aM>=aR.max&&aL>=aR.max){J.lineTo(aS.p2c(a1),aR.p2c(aR.max));J.lineTo(aS.p2c(a0),aR.p2c(aR.max));continue}else{if(aM<=aR.min&&aL<=aR.min){J.lineTo(aS.p2c(a1),aR.p2c(aR.min));J.lineTo(aS.p2c(a0),aR.p2c(aR.min));continue}}var aQ=a1,aU=a0;if(aM<=aL&&aM<aR.min&&aL>=aR.min){a1=(aR.min-aM)/(aL-aM)*(a0-a1)+a1;aM=aR.min}else{if(aL<=aM&&aL<aR.min&&aM>=aR.min){a0=(aR.min-aM)/(aL-aM)*(a0-a1)+a1;aL=aR.min}}if(aM>=aL&&aM>aR.max&&aL<=aR.max){a1=(aR.max-aM)/(aL-aM)*(a0-a1)+a1;aM=aR.max}else{if(aL>=aM&&aL>aR.max&&aM<=aR.max){a0=(aR.max-aM)/(aL-aM)*(a0-a1)+a1;aL=aR.max}}if(a1!=aQ){J.lineTo(aS.p2c(aQ),aR.p2c(aM))}J.lineTo(aS.p2c(a1),aR.p2c(aM));J.lineTo(aS.p2c(a0),aR.p2c(aL));if(a0!=aU){J.lineTo(aS.p2c(a0),aR.p2c(aL));J.lineTo(aS.p2c(aU),aR.p2c(aL))}}}J.save();J.translate(q.left,q.top);J.lineJoin="round";var aI=aG.lines.lineWidth,aD=aG.shadowSize;if(aI>0&&aD>0){J.lineWidth=aD;J.strokeStyle="rgba(0,0,0,0.1)";var aJ=Math.PI/18;aF(aG.datapoints,Math.sin(aJ)*(aI/2+aD/2),Math.cos(aJ)*(aI/2+aD/2),aG.xaxis,aG.yaxis);J.lineWidth=aD/2;aF(aG.datapoints,Math.sin(aJ)*(aI/2+aD/4),Math.cos(aJ)*(aI/2+aD/4),aG.xaxis,aG.yaxis)}J.lineWidth=aI;J.strokeStyle=aG.color;var aE=ag(aG.lines,aG.color,0,w);if(aE){J.fillStyle=aE;aH(aG.datapoints,aG.xaxis,aG.yaxis)}if(aI>0){aF(aG.datapoints,0,0,aG.xaxis,aG.yaxis)}J.restore()}function aq(aG){function aJ(aP,aO,aW,aM,aU,aV,aS,aL){var aT=aP.points,aK=aP.pointsize;for(var aN=0;aN<aT.length;aN+=aK){var aR=aT[aN],aQ=aT[aN+1];if(aR==null||aR<aV.min||aR>aV.max||aQ<aS.min||aQ>aS.max){continue}J.beginPath();aR=aV.p2c(aR);aQ=aS.p2c(aQ)+aM;if(aL=="circle"){J.arc(aR,aQ,aO,0,aU?Math.PI:Math.PI*2,false)}else{aL(J,aR,aQ,aO,aU)}J.closePath();if(aW){J.fillStyle=aW;J.fill()}J.stroke()}}J.save();J.translate(q.left,q.top);var aI=aG.points.lineWidth,aE=aG.shadowSize,aD=aG.points.radius,aH=aG.points.symbol;if(aI>0&&aE>0){var aF=aE/2;J.lineWidth=aF;J.strokeStyle="rgba(0,0,0,0.1)";aJ(aG.datapoints,aD,null,aF+aF/2,true,aG.xaxis,aG.yaxis,aH);J.strokeStyle="rgba(0,0,0,0.2)";aJ(aG.datapoints,aD,null,aF/2,true,aG.xaxis,aG.yaxis,aH)}J.lineWidth=aI;J.strokeStyle=aG.color;aJ(aG.datapoints,aD,ag(aG.points,aG.color),0,false,aG.xaxis,aG.yaxis,aH);J.restore()}function G(aP,aO,aX,aK,aS,aH,aF,aN,aM,aW,aT,aE){var aG,aV,aL,aR,aI,aD,aQ,aJ,aU;if(aT){aJ=aD=aQ=true;aI=false;aG=aX;aV=aP;aR=aO+aK;aL=aO+aS;if(aV<aG){aU=aV;aV=aG;aG=aU;aI=true;aD=false}}else{aI=aD=aQ=true;aJ=false;aG=aP+aK;aV=aP+aS;aL=aX;aR=aO;if(aR<aL){aU=aR;aR=aL;aL=aU;aJ=true;aQ=false}}if(aV<aN.min||aG>aN.max||aR<aM.min||aL>aM.max){return}if(aG<aN.min){aG=aN.min;aI=false}if(aV>aN.max){aV=aN.max;aD=false}if(aL<aM.min){aL=aM.min;aJ=false}if(aR>aM.max){aR=aM.max;aQ=false}aG=aN.p2c(aG);aL=aM.p2c(aL);aV=aN.p2c(aV);aR=aM.p2c(aR);if(aF){aW.beginPath();aW.moveTo(aG,aL);aW.lineTo(aG,aR);aW.lineTo(aV,aR);aW.lineTo(aV,aL);aW.fillStyle=aF(aL,aR);aW.fill()}if(aE>0&&(aI||aD||aQ||aJ)){aW.beginPath();aW.moveTo(aG,aL+aH);if(aI){aW.lineTo(aG,aR+aH)}else{aW.moveTo(aG,aR+aH)}if(aQ){aW.lineTo(aV,aR+aH)}else{aW.moveTo(aV,aR+aH)}if(aD){aW.lineTo(aV,aL+aH)}else{aW.moveTo(aV,aL+aH)}if(aJ){aW.lineTo(aG,aL+aH)}else{aW.moveTo(aG,aL+aH)}aW.stroke()}}function e(aF){function aE(aL,aK,aN,aI,aM,aP,aO){var aQ=aL.points,aH=aL.pointsize;for(var aJ=0;aJ<aQ.length;aJ+=aH){if(aQ[aJ]==null){continue}G(aQ[aJ],aQ[aJ+1],aQ[aJ+2],aK,aN,aI,aM,aP,aO,J,aF.bars.horizontal,aF.bars.lineWidth)}}J.save();J.translate(q.left,q.top);J.lineWidth=aF.bars.lineWidth;J.strokeStyle=aF.color;var aD=aF.bars.align=="left"?0:-aF.bars.barWidth/2;var aG=aF.bars.fill?function(aH,aI){return ag(aF.bars,aF.color,aH,aI)}:null;aE(aF.datapoints,aD,aD+aF.bars.barWidth,0,aG,aF.xaxis,aF.yaxis);J.restore()}function ag(aF,aD,aE,aH){var aG=aF.fill;if(!aG){return null}if(aF.fillColor){return ao(aF.fillColor,aE,aH,aD)}var aI=c.color.parse(aD);aI.a=typeof aG=="number"?aG:0.4;aI.normalize();return aI.toString()}function o(){ax.find(".legend").remove();if(!Q.legend.show){return}var aJ=[],aH=false,aP=Q.legend.labelFormatter,aO,aL;for(var aG=0;aG<S.length;++aG){aO=S[aG];aL=aO.label;if(!aL){continue}if(aG%Q.legend.noColumns==0){if(aH){aJ.push("</tr>")}aJ.push("<tr>");aH=true}if(aP){aL=aP(aL,aO)}aJ.push('<td class="legendColorBox"><div style="border:1px solid '+Q.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+aO.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+aL+"</td>")}if(aH){aJ.push("</tr>")}if(aJ.length==0){return}var aN='<table style="font-size:smaller;color:'+Q.grid.color+'">'+aJ.join("")+"</table>";if(Q.legend.container!=null){c(Q.legend.container).html(aN)}else{var aK="",aE=Q.legend.position,aF=Q.legend.margin;if(aF[0]==null){aF=[aF,aF]}if(aE.charAt(0)=="n"){aK+="top:"+(aF[1]+q.top)+"px;"}else{if(aE.charAt(0)=="s"){aK+="bottom:"+(aF[1]+q.bottom)+"px;"}}if(aE.charAt(1)=="e"){aK+="right:"+(aF[0]+q.right)+"px;"}else{if(aE.charAt(1)=="w"){aK+="left:"+(aF[0]+q.left)+"px;"}}var aM=c('<div class="legend">'+aN.replace('style="','style="position:absolute;'+aK+";")+"</div>").appendTo(ax);if(Q.legend.backgroundOpacity!=0){var aI=Q.legend.backgroundColor;if(aI==null){aI=Q.grid.backgroundColor;if(aI&&typeof aI=="string"){aI=c.color.parse(aI)}else{aI=c.color.extract(aM,"background-color")}aI.a=1;aI=aI.toString()}var aD=aM.children();c('<div style="position:absolute;width:'+aD.width()+"px;height:"+aD.height()+"px;"+aK+"background-color:"+aI+';"> </div>').prependTo(aM).css("opacity",Q.legend.backgroundOpacity)}}}var ad=[],O=null;function M(aK,aI,aF){var aQ=Q.grid.mouseActiveRadius,a2=aQ*aQ+1,a0=null,aT=false,aY,aW;for(aY=S.length-1;aY>=0;--aY){if(!aF(S[aY])){continue}var aR=S[aY],aJ=aR.xaxis,aH=aR.yaxis,aX=aR.datapoints.points,aV=aR.datapoints.pointsize,aS=aJ.c2p(aK),aP=aH.c2p(aI),aE=aQ/aJ.scale,aD=aQ/aH.scale;if(aJ.options.inverseTransform){aE=Number.MAX_VALUE}if(aH.options.inverseTransform){aD=Number.MAX_VALUE}if(aR.lines.show||aR.points.show){for(aW=0;aW<aX.length;aW+=aV){var aM=aX[aW],aL=aX[aW+1];if(aM==null){continue}if(aM-aS>aE||aM-aS<-aE||aL-aP>aD||aL-aP<-aD){continue}var aO=Math.abs(aJ.p2c(aM)-aK),aN=Math.abs(aH.p2c(aL)-aI),aU=aO*aO+aN*aN;if(aU<a2){a2=aU;a0=[aY,aW/aV]}}}if(aR.bars.show&&!a0){var aG=aR.bars.align=="left"?0:-aR.bars.barWidth/2,aZ=aG+aR.bars.barWidth;for(aW=0;aW<aX.length;aW+=aV){var aM=aX[aW],aL=aX[aW+1],a1=aX[aW+2];if(aM==null){continue}if(S[aY].bars.horizontal?(aS<=Math.max(a1,aM)&&aS>=Math.min(a1,aM)&&aP>=aL+aG&&aP<=aL+aZ):(aS>=aM+aG&&aS<=aM+aZ&&aP>=Math.min(a1,aL)&&aP<=Math.max(a1,aL))){a0=[aY,aW/aV]}}}}if(a0){aY=a0[0];aW=a0[1];aV=S[aY].datapoints.pointsize;return{datapoint:S[aY].datapoints.points.slice(aW*aV,(aW+1)*aV),dataIndex:aW,series:S[aY],seriesIndex:aY}}return null}function ac(aD){if(Q.grid.hoverable){u("plothover",aD,function(aE){return aE.hoverable!=false})}}function l(aD){if(Q.grid.hoverable){u("plothover",aD,function(aE){return false})}}function T(aD){u("plotclick",aD,function(aE){return aE.clickable!=false})}function u(aE,aD,aF){var aG=A.offset(),aJ=aD.pageX-aG.left-q.left,aH=aD.pageY-aG.top-q.top,aL=E({left:aJ,top:aH});aL.pageX=aD.pageX;aL.pageY=aD.pageY;var aM=M(aJ,aH,aF);if(aM){aM.pageX=parseInt(aM.series.xaxis.p2c(aM.datapoint[0])+aG.left+q.left);aM.pageY=parseInt(aM.series.yaxis.p2c(aM.datapoint[1])+aG.top+q.top)}if(Q.grid.autoHighlight){for(var aI=0;aI<ad.length;++aI){var aK=ad[aI];if(aK.auto==aE&&!(aM&&aK.series==aM.series&&aK.point[0]==aM.datapoint[0]&&aK.point[1]==aM.datapoint[1])){V(aK.series,aK.point)}}if(aM){z(aM.series,aM.datapoint,aE)}}ax.trigger(aE,[aL,aM])}function f(){if(!O){O=setTimeout(s,30)}}function s(){O=null;C.save();C.clearRect(0,0,I,K);C.translate(q.left,q.top);var aE,aD;for(aE=0;aE<ad.length;++aE){aD=ad[aE];if(aD.series.bars.show){v(aD.series,aD.point)}else{aA(aD.series,aD.point)}}C.restore();ap(am.drawOverlay,[C])}function z(aF,aD,aH){if(typeof aF=="number"){aF=S[aF]}if(typeof aD=="number"){var aG=aF.datapoints.pointsize;aD=aF.datapoints.points.slice(aG*aD,aG*(aD+1))}var aE=an(aF,aD);if(aE==-1){ad.push({series:aF,point:aD,auto:aH});f()}else{if(!aH){ad[aE].auto=false}}}function V(aF,aD){if(aF==null&&aD==null){ad=[];f()}if(typeof aF=="number"){aF=S[aF]}if(typeof aD=="number"){aD=aF.data[aD]}var aE=an(aF,aD);if(aE!=-1){ad.splice(aE,1);f()}}function an(aF,aG){for(var aD=0;aD<ad.length;++aD){var aE=ad[aD];if(aE.series==aF&&aE.point[0]==aG[0]&&aE.point[1]==aG[1]){return aD}}return -1}function aA(aG,aF){var aE=aF[0],aK=aF[1],aJ=aG.xaxis,aI=aG.yaxis;if(aE<aJ.min||aE>aJ.max||aK<aI.min||aK>aI.max){return}var aH=aG.points.radius+aG.points.lineWidth/2;C.lineWidth=aH;C.strokeStyle=c.color.parse(aG.color).scale("a",0.5).toString();var aD=1.5*aH,aE=aJ.p2c(aE),aK=aI.p2c(aK);C.beginPath();if(aG.points.symbol=="circle"){C.arc(aE,aK,aD,0,2*Math.PI,false)}else{aG.points.symbol(C,aE,aK,aD,false)}C.closePath();C.stroke()}function v(aG,aD){C.lineWidth=aG.bars.lineWidth;C.strokeStyle=c.color.parse(aG.color).scale("a",0.5).toString();var aF=c.color.parse(aG.color).scale("a",0.5).toString();var aE=aG.bars.align=="left"?0:-aG.bars.barWidth/2;G(aD[0],aD[1],aD[2]||0,aE,aE+aG.bars.barWidth,0,function(){return aF},aG.xaxis,aG.yaxis,C,aG.bars.horizontal,aG.bars.lineWidth)}function ao(aL,aD,aJ,aE){if(typeof aL=="string"){return aL}else{var aK=J.createLinearGradient(0,aJ,0,aD);for(var aG=0,aF=aL.colors.length;aG<aF;++aG){var aH=aL.colors[aG];if(typeof aH!="string"){var aI=c.color.parse(aE);if(aH.brightness!=null){aI=aI.scale("rgb",aH.brightness)}if(aH.opacity!=null){aI.a*=aH.opacity}aH=aI.toString()}aK.addColorStop(aG/(aF-1),aH)}return aK}}}c.plot=function(g,e,d){var f=new b(c(g),e,d,c.plot.plugins);return f};c.plot.version="0.7";c.plot.plugins=[];c.plot.formatDate=function(l,f,h){var o=function(d){d=""+d;return d.length==1?"0"+d:d};var e=[];var p=false,j=false;var n=l.getUTCHours();var k=n<12;if(h==null){h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}if(f.search(/%p|%P/)!=-1){if(n>12){n=n-12}else{if(n==0){n=12}}}for(var g=0;g<f.length;++g){var m=f.charAt(g);if(p){switch(m){case"h":m=""+n;break;case"H":m=o(n);break;case"M":m=o(l.getUTCMinutes());break;case"S":m=o(l.getUTCSeconds());break;case"d":m=""+l.getUTCDate();break;case"m":m=""+(l.getUTCMonth()+1);break;case"y":m=""+l.getUTCFullYear();break;case"b":m=""+h[l.getUTCMonth()];break;case"p":m=(k)?("am"):("pm");break;case"P":m=(k)?("AM"):("PM");break;case"0":m="";j=true;break}if(m&&j){m=o(m);j=false}e.push(m);if(!j){p=false}}else{if(m=="%"){p=true}else{e.push(m)}}}return e.join("")};function a(e,d){return d*Math.floor(e/d)}})(jQuery);(function(b){function c(D){var h=null;var L=null;var n=null;var B=null;var p=null;var M=0;var F=true;var o=10;var w=0.95;var A=0;var d=false;var z=false;var j=[];D.hooks.processOptions.push(g);D.hooks.bindEvents.push(e);function g(O,N){if(N.series.pie.show){N.grid.show=false;if(N.series.pie.label.show=="auto"){if(N.legend.show){N.series.pie.label.show=false}else{N.series.pie.label.show=true}}if(N.series.pie.radius=="auto"){if(N.series.pie.label.show){N.series.pie.radius=3/4}else{N.series.pie.radius=1}}if(N.series.pie.tilt>1){N.series.pie.tilt=1}if(N.series.pie.tilt<0){N.series.pie.tilt=0}O.hooks.processDatapoints.push(E);O.hooks.drawOverlay.push(H);O.hooks.draw.push(r)}}function e(P,N){var O=P.getOptions();if(O.series.pie.show&&O.grid.hoverable){N.unbind("mousemove").mousemove(t)}if(O.series.pie.show&&O.grid.clickable){N.unbind("click").click(l)}}function G(O){var P="";function N(S,T){if(!T){T=0}for(var R=0;R<S.length;++R){for(var Q=0;Q<T;Q++){P+="\t"}if(typeof S[R]=="object"){P+=""+R+":\n";N(S[R],T+1)}else{P+=""+R+": "+S[R]+"\n"}}}N(O);alert(P)}function q(P){for(var N=0;N<P.length;++N){var O=parseFloat(P[N].data[0][1]);if(O){M+=O}}}function E(Q,N,O,P){if(!d){d=true;h=Q.getCanvas();L=b(h).parent();a=Q.getOptions();Q.setData(K(Q.getData()))}}function I(){A=L.children().filter(".legend").children().width();n=Math.min(h.width,(h.height/a.series.pie.tilt))/2;p=(h.height/2)+a.series.pie.offset.top;B=(h.width/2);if(a.series.pie.offset.left=="auto"){if(a.legend.position.match("w")){B+=A/2}else{B-=A/2}}else{B+=a.series.pie.offset.left}if(B<n){B=n}else{if(B>h.width-n){B=h.width-n}}}function v(O){for(var N=0;N<O.length;++N){if(typeof(O[N].data)=="number"){O[N].data=[[1,O[N].data]]}else{if(typeof(O[N].data)=="undefined"||typeof(O[N].data[0])=="undefined"){if(typeof(O[N].data)!="undefined"&&typeof(O[N].data.label)!="undefined"){O[N].label=O[N].data.label}O[N].data=[[1,0]]}}}return O}function K(Q){Q=v(Q);q(Q);var P=0;var S=0;var N=a.series.pie.combine.color;var R=[];for(var O=0;O<Q.length;++O){Q[O].data[0][1]=parseFloat(Q[O].data[0][1]);if(!Q[O].data[0][1]){Q[O].data[0][1]=0}if(Q[O].data[0][1]/M<=a.series.pie.combine.threshold){P+=Q[O].data[0][1];S++;if(!N){N=Q[O].color}}else{R.push({data:[[1,Q[O].data[0][1]]],color:Q[O].color,label:Q[O].label,angle:(Q[O].data[0][1]*(Math.PI*2))/M,percent:(Q[O].data[0][1]/M*100)})}}if(S>0){R.push({data:[[1,P]],color:N,label:a.series.pie.combine.label,angle:(P*(Math.PI*2))/M,percent:(P/M*100)})}return R}function r(S,Q){if(!L){return}ctx=Q;I();var T=S.getData();var P=0;while(F&&P<o){F=false;if(P>0){n*=w}P+=1;N();if(a.series.pie.tilt<=0.8){O()}R()}if(P>=o){N();L.prepend('<div class="error">Could not draw pie with labels contained inside canvas</div>')}if(S.setSeries&&S.insertLegend){S.setSeries(T);S.insertLegend()}function N(){ctx.clearRect(0,0,h.width,h.height);L.children().filter(".pieLabel, .pieLabelBackground").remove()}function O(){var Z=5;var Y=15;var W=10;var X=0.02;if(a.series.pie.radius>1){var U=a.series.pie.radius}else{var U=n*a.series.pie.radius}if(U>=(h.width/2)-Z||U*a.series.pie.tilt>=(h.height/2)-Y||U<=W){return}ctx.save();ctx.translate(Z,Y);ctx.globalAlpha=X;ctx.fillStyle="#000";ctx.translate(B,p);ctx.scale(1,a.series.pie.tilt);for(var V=1;V<=W;V++){ctx.beginPath();ctx.arc(0,0,U,0,Math.PI*2,false);ctx.fill();U-=V}ctx.restore()}function R(){startAngle=Math.PI*a.series.pie.startAngle;if(a.series.pie.radius>1){var U=a.series.pie.radius}else{var U=n*a.series.pie.radius}ctx.save();ctx.translate(B,p);ctx.scale(1,a.series.pie.tilt);ctx.save();var Y=startAngle;for(var W=0;W<T.length;++W){T[W].startAngle=Y;X(T[W].angle,T[W].color,true)}ctx.restore();ctx.save();ctx.lineWidth=a.series.pie.stroke.width;Y=startAngle;for(var W=0;W<T.length;++W){X(T[W].angle,a.series.pie.stroke.color,false)}ctx.restore();J(ctx);if(a.series.pie.label.show){V()}ctx.restore();function X(ab,Z,aa){if(ab<=0){return}if(aa){ctx.fillStyle=Z}else{ctx.strokeStyle=Z;ctx.lineJoin="round"}ctx.beginPath();if(Math.abs(ab-Math.PI*2)>1e-9){ctx.moveTo(0,0)}else{if(b.browser.msie){ab-=0.0001}}ctx.arc(0,0,U,Y,Y+ab,false);ctx.closePath();Y+=ab;if(aa){ctx.fill()}else{ctx.stroke()}}function V(){var ac=startAngle;if(a.series.pie.label.radius>1){var Z=a.series.pie.label.radius}else{var Z=n*a.series.pie.label.radius}for(var ab=0;ab<T.length;++ab){if(T[ab].percent>=a.series.pie.label.threshold*100){aa(T[ab],ac,ab)}ac+=T[ab].angle}function aa(ap,ai,ag){if(ap.data[0][1]==0){return}var ar=a.legend.labelFormatter,aq,ae=a.series.pie.label.formatter;if(ar){aq=ar(ap.label,ap)}else{aq=ap.label}if(ae){aq=ae(aq,ap)}var aj=((ai+ap.angle)+ai)/2;var ao=B+Math.round(Math.cos(aj)*Z);var am=p+Math.round(Math.sin(aj)*Z)*a.series.pie.tilt;var af='<span class="pieLabel" id="pieLabel'+ag+'" style="position:absolute;top:'+am+"px;left:"+ao+'px;">'+aq+"</span>";L.append(af);var an=L.children("#pieLabel"+ag);var ad=(am-an.height()/2);var ah=(ao-an.width()/2);an.css("top",ad);an.css("left",ah);if(0-ad>0||0-ah>0||h.height-(ad+an.height())<0||h.width-(ah+an.width())<0){F=true}if(a.series.pie.label.background.opacity!=0){var ak=a.series.pie.label.background.color;if(ak==null){ak=ap.color}var al="top:"+ad+"px;left:"+ah+"px;";b('<div class="pieLabelBackground" style="position:absolute;width:'+an.width()+"px;height:"+an.height()+"px;"+al+"background-color:"+ak+';"> </div>').insertBefore(an).css("opacity",a.series.pie.label.background.opacity)}}}}}function J(N){if(a.series.pie.innerRadius>0){N.save();innerRadius=a.series.pie.innerRadius>1?a.series.pie.innerRadius:n*a.series.pie.innerRadius;N.globalCompositeOperation="destination-out";N.beginPath();N.fillStyle=a.series.pie.stroke.color;N.arc(0,0,innerRadius,0,Math.PI*2,false);N.fill();N.closePath();N.restore();N.save();N.beginPath();N.strokeStyle=a.series.pie.stroke.color;N.arc(0,0,innerRadius,0,Math.PI*2,false);N.stroke();N.closePath();N.restore()}}function s(Q,R){for(var S=false,P=-1,N=Q.length,O=N-1;++P<N;O=P){((Q[P][1]<=R[1]&&R[1]<Q[O][1])||(Q[O][1]<=R[1]&&R[1]<Q[P][1]))&&(R[0]<(Q[O][0]-Q[P][0])*(R[1]-Q[P][1])/(Q[O][1]-Q[P][1])+Q[P][0])&&(S=!S)}return S}function u(R,P){var T=D.getData(),O=D.getOptions(),N=O.series.pie.radius>1?O.series.pie.radius:n*O.series.pie.radius;for(var Q=0;Q<T.length;++Q){var S=T[Q];if(S.pie.show){ctx.save();ctx.beginPath();ctx.moveTo(0,0);ctx.arc(0,0,N,S.startAngle,S.startAngle+S.angle,false);ctx.closePath();x=R-B;y=P-p;if(ctx.isPointInPath){if(ctx.isPointInPath(R-B,P-p)){ctx.restore();return{datapoint:[S.percent,S.data],dataIndex:0,series:S,seriesIndex:Q}}}else{p1X=(N*Math.cos(S.startAngle));p1Y=(N*Math.sin(S.startAngle));p2X=(N*Math.cos(S.startAngle+(S.angle/4)));p2Y=(N*Math.sin(S.startAngle+(S.angle/4)));p3X=(N*Math.cos(S.startAngle+(S.angle/2)));p3Y=(N*Math.sin(S.startAngle+(S.angle/2)));p4X=(N*Math.cos(S.startAngle+(S.angle/1.5)));p4Y=(N*Math.sin(S.startAngle+(S.angle/1.5)));p5X=(N*Math.cos(S.startAngle+S.angle));p5Y=(N*Math.sin(S.startAngle+S.angle));arrPoly=[[0,0],[p1X,p1Y],[p2X,p2Y],[p3X,p3Y],[p4X,p4Y],[p5X,p5Y]];arrPoint=[x,y];if(s(arrPoly,arrPoint)){ctx.restore();return{datapoint:[S.percent,S.data],dataIndex:0,series:S,seriesIndex:Q}}}ctx.restore()}}return null}function t(N){m("plothover",N)}function l(N){m("plotclick",N)}function m(N,T){var O=D.offset(),R=parseInt(T.pageX-O.left),P=parseInt(T.pageY-O.top),V=u(R,P);if(a.grid.autoHighlight){for(var Q=0;Q<j.length;++Q){var S=j[Q];if(S.auto==N&&!(V&&S.series==V.series)){f(S.series)}}}if(V){k(V.series,N)}var U={pageX:T.pageX,pageY:T.pageY};L.trigger(N,[U,V])}function k(O,P){if(typeof O=="number"){O=series[O]}var N=C(O);if(N==-1){j.push({series:O,auto:P});D.triggerRedrawOverlay()}else{if(!P){j[N].auto=false}}}function f(O){if(O==null){j=[];D.triggerRedrawOverlay()}if(typeof O=="number"){O=series[O]}var N=C(O);if(N!=-1){j.splice(N,1);D.triggerRedrawOverlay()}}function C(P){for(var N=0;N<j.length;++N){var O=j[N];if(O.series==P){return N}}return -1}function H(Q,R){var P=Q.getOptions();var N=P.series.pie.radius>1?P.series.pie.radius:n*P.series.pie.radius;R.save();R.translate(B,p);R.scale(1,P.series.pie.tilt);for(i=0;i<j.length;++i){O(j[i].series)}J(R);R.restore();function O(S){if(S.angle<0){return}R.fillStyle="rgba(255, 255, 255, "+P.series.pie.highlight.opacity+")";R.beginPath();if(Math.abs(S.angle-Math.PI*2)>1e-9){R.moveTo(0,0)}R.arc(0,0,N,S.startAngle,S.startAngle+S.angle,false);R.closePath();R.fill()}}}var a={series:{pie:{show:false,radius:"auto",innerRadius:0,startAngle:3/2,tilt:1,offset:{top:0,left:"auto"},stroke:{color:"#FFF",width:1},label:{show:"auto",formatter:function(d,e){return'<div style="font-size:x-small;text-align:center;padding:2px;color:'+e.color+';">'+d+"<br/>"+Math.round(e.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:0.5}}}};b.plot.plugins.push({init:c,options:a,name:"pie",version:"1.0"})})(jQuery);